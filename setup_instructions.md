# Настройка Telegram бота для управления пивными кранами

## Пошаговая инструкция

### 1. Создание бота в Telegram

1. Откройте Telegram и найдите бота [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Введите название вашего бота (например: "Пивные краны")
4. Введите username бота (например: "beer_taps_bot")
5. Скопируйте полученный **токен** (выглядит как `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 2. Получение вашего ID

1. Найдите бота [@userinfobot](https://t.me/userinfobot) в Telegram
2. Отправьте ему любое сообщение
3. Скопируйте ваш **ID** (число, например: `123456789`)

### 3. Установка зависимостей

```bash
# Установите python-telegram-bot
pip3 install python-telegram-bot
```

### 4. Настройка переменных окружения

#### Вариант 1: Временная настройка (для тестирования)
```bash
# Замените на ваши реальные данные
export TELEGRAM_BOT_TOKEN="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"
export ADMIN_IDS="123456789"
```

#### Вариант 2: Постоянная настройка
Добавьте в файл `~/.bashrc` или `~/.zshrc`:
```bash
# Telegram бот для пивных кранов
export TELEGRAM_BOT_TOKEN="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"
export ADMIN_IDS="123456789,987654321"  # Добавьте других админов через запятую
```

Затем выполните:
```bash
source ~/.bashrc  # или source ~/.zshrc
```

### 5. Запуск бота

```bash
# Запуск через скрипт (рекомендуется)
python3 run_bot.py

# Или напрямую
python3 telegram_bot.py
```

### 6. Тестирование

1. Найдите вашего бота в Telegram по username
2. Отправьте команду `/start`
3. Если вы админ, используйте `/admin` для доступа к панели управления

## Команды бота

### Для всех пользователей:
- `/start` - приветствие и информация о правах
- `/help` - список всех команд
- `/taps` - показать все краны
- `/find <номер>` - найти пиво по номеру крана

### Для администраторов:
- `/admin` - панель администратора
  - Добавить пиво в кран
  - Редактировать информацию о пиве
  - Удалить пиво из крана
  - Показать все краны

## Устранение проблем

### Ошибка "TELEGRAM_BOT_TOKEN не установлен"
```bash
export TELEGRAM_BOT_TOKEN="ваш_токен_здесь"
```

### Ошибка "ADMIN_IDS не установлен"
```bash
export ADMIN_IDS="ваш_id_здесь"
```

### Бот не отвечает
1. Проверьте правильность токена
2. Убедитесь, что бот не заблокирован
3. Проверьте логи в консоли

### Нет прав администратора
1. Проверьте, что ваш ID добавлен в ADMIN_IDS
2. Перезапустите бота после изменения переменных окружения

## Примеры использования

### Добавление пива (только для админов):
1. Отправьте `/admin`
2. Нажмите "➕ Добавить пиво"
3. Введите номер крана
4. Введите пивоварню
5. Введите название пива
6. Введите стиль
7. Введите цену за литр

### Просмотр кранов (для всех):
```
/taps
```

### Поиск пива:
```
/find 1
```

## Безопасность

- Никогда не публикуйте токен бота в открытом доступе
- Регулярно меняйте токен при необходимости
- Ограничьте список администраторов только необходимыми людьми
- Используйте переменные окружения для хранения чувствительных данных

## Мониторинг

Бот автоматически записывает логи в консоль. Для сохранения логов в файл:
```bash
export LOG_FILE="beer_bot.log"
python3 run_bot.py > beer_bot.log 2>&1 &
```

## Автозапуск (Linux/macOS)

Для автоматического запуска бота при загрузке системы создайте systemd сервис или используйте cron.
